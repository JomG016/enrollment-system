/* =========================
   CNHS DASHBOARD - Improved Day/Night Theme
   (Drop-in replacement for dash.css)
   ========================= */

/* -------------------------
   1) TOKENS (default = DAY)
------------------------- */
:root{
  /* Typography */
  --ink: #0b1220;
  --muted: rgba(11,18,32,0.72);

  /* Glass */
  --glass: rgba(255,255,255,0.52);
  --glass-border: rgba(255,255,255,0.72);
  --glass-highlight: rgba(255,255,255,0.30);

  /* Backdrop */
  --bg1: rgba(201,74,124,0.18);      /* rose */
  --bg2: rgba(0,180,255,0.16);       /* cyan */
  --bg3: rgba(230,211,163,0.18);     /* champagne */

  /* Accent */
  --accent: #C94A7C;
  --accent2: #f4c8da;

  /* Tabs */
  --tab-bg: rgba(255,255,255,0.74);
  --tab-text: #101828;
  --tab-active-bg: linear-gradient(135deg, #C94A7C, #B13E6D);
  --tab-active-text: #fff;
  --tab-border: rgba(11,18,32,0.14);

  /* Sidebar buttons */
  --side-bg: rgba(0,0,0,0.45);
  --side-text: #fff;
  --side-hover-bg: rgba(255,255,255,0.80);
  --side-hover-text: #000;

  /* Table */
  --table-bg: rgba(255,255,255,0.60);
  --table-head-bg: rgba(255,255,255,0.82);
  --table-border: rgba(11,18,32,0.14);
  --row-hover: rgba(201,74,124,0.10);
  --row-alt: rgba(255,255,255,0.34);

  /* Shadows / radii */
  --shadow-lg: 0 20px 50px rgba(0,0,0,0.22);
  --shadow-md: 0 14px 30px rgba(0,0,0,0.18);
  --shadow-sm: 0 10px 20px rgba(0,0,0,0.12);

  --r-lg: 26px;
  --r-md: 20px;
  --r-sm: 14px;

  --ease: cubic-bezier(.2,.8,.2,1);
}

/* -------------------------
   2) DAY BACKGROUND
------------------------- */
body.day{
  margin:0;
  font-family: "Segoe UI", sans-serif;
  color: var(--ink);
  background:
    radial-gradient(900px 520px at 18% 12%, var(--bg1), transparent 62%),
    radial-gradient(900px 520px at 82% 78%, var(--bg2), transparent 62%),
    radial-gradient(800px 420px at 62% 18%, var(--bg3), transparent 60%),
    linear-gradient(135deg,#f2f4fb 0%, #dfe5f2 45%, #f7f8ff 100%);
}

/* -------------------------
   3) NIGHT THEME OVERRIDES
------------------------- */
body.night{
  /* text */
  --ink: #eaf0ff;
  --muted: rgba(234,240,255,0.75);

  /* glass */
  --glass: rgba(10, 12, 18, 0.46);
  --glass-border: rgba(200,180,255,0.18);
  --glass-highlight: rgba(255,255,255,0.12);

  /* backdrop */
  --bg1: rgba(155, 120, 255, 0.26);
  --bg2: rgba(0, 180, 255, 0.16);
  --bg3: rgba(255, 80, 160, 0.14);

  /* tabs */
  --tab-bg: rgba(160,140,255,0.28);
  --tab-text: #fff;
  --tab-active-bg: linear-gradient(135deg, rgba(160,140,255,0.65), rgba(201,74,124,0.55));
  --tab-active-text: #fff;
  --tab-border: rgba(210,195,255,0.40);

  /* sidebar */
  --side-bg: rgba(0,0,0,0.45);
  --side-text: #fff;
  --side-hover-bg: rgba(160,140,255,0.26);
  --side-hover-text: #fff;

  /* table */
  --table-bg: rgba(0,0,0,0.22);
  --table-head-bg: rgba(255,255,255,0.08);
  --table-border: rgba(255,255,255,0.14);
  --row-hover: rgba(160,140,255,0.16);
  --row-alt: rgba(255,255,255,0.05);

  margin:0;
  font-family: "Segoe UI", sans-serif;
  color: var(--ink);
  background:
    radial-gradient(900px 560px at 25% 15%, var(--bg1), transparent 62%),
    radial-gradient(900px 560px at 75% 80%, var(--bg2), transparent 62%),
    radial-gradient(800px 420px at 60% 18%, var(--bg3), transparent 60%),
    linear-gradient(135deg,#0b0a1a 0%, #1e1b3f 45%, #111129 100%);
}

/* =========================
   LAYOUT (same)
========================= */
.app{
  height:100vh;
  display:grid;
  grid-template-columns: 120px 1fr;
}

.sidebar{
  padding:14px 12px;
  display:flex;
  flex-direction:column;
  gap:14px;
  align-items:center;
}

.main{
  padding:18px 22px;
  display:flex;
  flex-direction:column;
  gap:14px;
}

/* =========================
   GLASS (improved depth)
========================= */
.glass{
  position:relative;
  background: var(--glass);
  border: 1px solid var(--glass-border);
  backdrop-filter: blur(26px) saturate(170%);
  -webkit-backdrop-filter: blur(26px) saturate(170%);
  box-shadow: var(--shadow-lg);
  border-radius: var(--r-lg);
  overflow: hidden;
}

.glass::after{
  content:"";
  position:absolute;
  inset:-1px;
  border-radius:inherit;
  pointer-events:none;
  background:
    radial-gradient(900px 260px at 20% 10%, var(--glass-highlight), transparent 60%),
    linear-gradient(120deg, rgba(255,255,255,0.14), rgba(255,255,255,0.06), transparent);
  opacity:.75;
}

/* =========================
   BRAND
========================= */
.brand{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:8px;
  margin-bottom:8px;
}
.seal{
  width:54px;
  height:54px;
  border-radius:50%;
  object-fit:cover;
  box-shadow: 0 12px 24px rgba(0,0,0,.25);
}
.brand-text{
  font-weight:900;
  letter-spacing:.6px;
}

/* =========================
   SIDEBAR BUTTONS (cleaner hover)
========================= */
.sidebtn{
  width:92px;
  height:92px;
  border-radius:18px;
  border:1px solid rgba(255,255,255,0.45);
  background: var(--side-bg);
  color: var(--side-text);
  cursor:pointer;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  gap:6px;
  backdrop-filter: blur(18px) saturate(170%);
  transition: transform .18s var(--ease), box-shadow .22s var(--ease), background .22s var(--ease), color .22s var(--ease), border-color .22s var(--ease);
  position:relative;
  overflow:hidden;
}

.sidebtn img{
  width:42px;
  height:42px;
  object-fit:contain;
  filter: drop-shadow(0 6px 10px rgba(0,0,0,.30));
}
.sidebtn span{
  font-size:12px;
  font-weight:800;
  letter-spacing:.35px;
}

.sidebtn::before{
  content:"";
  position:absolute;
  inset:0;
  background: linear-gradient(120deg, rgba(255,255,255,.22), rgba(255,255,255,.06), transparent);
  opacity:.35;
  pointer-events:none;
}

/* Hover: lift + subtle glow (no harsh flash) */
.sidebtn:hover{
  transform: translateY(-2px) scale(1.02);
  background: var(--side-hover-bg);
  color: var(--side-hover-text);
  border-color: rgba(201,74,124,0.25);
  box-shadow: 0 18px 40px rgba(0,0,0,.28);
}
body.night .sidebtn:hover{
  box-shadow: 0 0 26px rgba(160,140,255,.35);
}

/* Active: stronger but consistent */
.sidebtn.active{
  background: rgba(255,255,255,0.86);
  color:#000;
  border-color: rgba(0,0,0,0.22);
}
body.night .sidebtn.active{
  background: rgba(160,140,255,0.34);
  color:#fff;
  border-color: rgba(210,195,255,0.35);
}

.spacer{ flex:1; }

/* =========================
   TABS (better readability)
========================= */
.topTabs, .subTabs{
  padding:10px 14px;
  display:flex;
  gap:12px;
  align-items:center;
  flex-wrap: wrap;
  flex-shrink: 0;
}

.tab{
  border: 1.5px solid var(--tab-border);
  padding:10px 18px;
  border-radius:999px;
  cursor:pointer;
  font-weight:900;
  letter-spacing:.35px;
  background: var(--tab-bg);
  color: var(--tab-text);
  box-shadow: 0 4px 12px rgba(0,0,0,0.20);
  transition: transform .14s var(--ease), box-shadow .18s var(--ease), background .18s var(--ease);
}

body.night .tab{
  background: var(--tab-bg);
  border-color: var(--tab-border);
  box-shadow: 0 0 12px rgba(160,140,255,0.15);
}

/* Scale-only hover (clean) */
.tab:hover{ transform: scale(1.05); }

/* Active = gradient, crisp */
.tab.active{
  background: var(--tab-active-bg);
  color: var(--tab-active-text);
  border-color: rgba(255,255,255,0.18);
  box-shadow: 0 16px 34px rgba(201,74,124,0.28);
}
body.night .tab.active{
  box-shadow: 0 0 24px rgba(160,140,255,0.22);
}

/* =========================
   ADVISER CARD
========================= */
.adviserCard{
  display:flex;
  align-items:center;
  gap:14px;
  padding:14px 16px;
  max-width: 700px;
  flex-shrink: 0;
}

.avatar .circle{
  width:66px;
  height:66px;
  border-radius:50%;
  overflow:hidden;
  background: rgba(255,255,255,0.55);
  display:flex;
  align-items:center;
  justify-content:center;
  border: 1px solid rgba(201,74,124,0.18);
}
body.night .avatar .circle{
  background: rgba(255,255,255,0.10);
  border-color: rgba(210,195,255,0.18);
}

.avatar img{
  width:100%;
  height:100%;
  object-fit:cover;
}

.adviserText .label{
  font-size:13px;
  font-weight:900;
  opacity:.85;
  color: var(--muted);
}
.adviserText .name{
  font-size:22px;
  font-weight:1000;
  letter-spacing:.35px;
}

/* =========================
   PAGES + TABLE
========================= */
.pageWrap{ flex:1; min-height:0; }
.page{ display:none; height:100%; }
.page.active{ display:block; }

.tableWrap{
  height:100%;
  padding:12px;
  border-radius:28px;
  overflow:auto;
  scrollbar-color: var(--accent) transparent;
  scrollbar-width: thin;
}

/* Webkit browsers (Chrome, Safari, Edge) */
.tableWrap::-webkit-scrollbar{
  width: 10px;
  height: 10px;
}

.tableWrap::-webkit-scrollbar-track{
  background: transparent;
}

.tableWrap::-webkit-scrollbar-thumb{
  background: var(--accent);
  border-radius: 8px;
  border: 2px solid transparent;
  background-clip: padding-box;
}

.tableWrap::-webkit-scrollbar-thumb:hover{
  background: var(--accent2);
  background-clip: padding-box;
}

.tbl{
  width:100%;
  border-collapse:collapse;
  background: var(--table-bg);
  border-radius:18px;
  overflow:hidden;
}

/* Header */
.tbl thead th{
  text-align:left;
  padding:12px 12px;
  font-weight:1000;
  border:1px solid var(--table-border);
  background: var(--table-head-bg);
  letter-spacing:.2px;
}

/* Body */
.tbl tbody td{
  padding:12px 12px;
  border:1px solid var(--table-border);
}

/* Zebra + hover */
.tbl tbody tr:nth-child(even){ background: var(--row-alt); }
.tbl tbody tr:hover{ background: var(--row-hover); }

/* =========================
   EMPTY STATE
========================= */
.emptyState{
  margin-top:12px;
  padding:16px;
  border-radius:18px;
  background: rgba(255,255,255,0.55);
  border: 1px solid rgba(11,18,32,0.16);
}
body.night .emptyState{
  background: rgba(0,0,0,0.22);
  border-color: rgba(255,255,255,0.14);
}

.emptyTitle{ font-weight:1000; font-size:16px; }
.emptySub{ opacity:.82; margin-top:4px; }

/* =========================
   GRAPH
========================= */
.graphWrap{ 
  height: auto; 
  min-height: 420px;
  padding:18px; 
  display: flex;
  flex-direction: column;
  gap: 12px;
}
.graphHeader{
  display:flex;
  align-items:flex-end;
  justify-content:space-between;
  gap:12px;
  flex-wrap: wrap;
}
.graphTitle{ margin:0; font-weight:1000; letter-spacing:.4px; }
.graphHint{ font-size:12px; font-weight:900; opacity:.78; }

#dailyChart{ 
  width: 100% !important;
  height: 420px !important;
  max-width: 100%;
}

/* =========================
   MODAL
========================= */
.modalOverlay{
  position:fixed;
  inset:0;
  display:none;
  align-items:center;
  justify-content:center;
  padding:18px;
  background: rgba(0,0,0,0.50);
  z-index:999;
}
.modalOverlay.show{ display:flex; }

.modal{
  width:min(520px, 92vw);
  padding:18px 18px 16px;
  border-radius:28px;
}

.modalTitle{ margin:0; font-weight:1000; letter-spacing:.2px; }
.modalSub{ margin:8px 0 12px 0; font-weight:900; opacity:.82; }

.modalRow{ display:flex; gap:10px; align-items:center; }

.modalInput{
  flex:1;
  border-radius:16px;
  border:1px solid rgba(11,18,32,0.22);
  padding:12px 14px;
  font-weight:900;
  outline:none;
  background: rgba(255,255,255,0.82);
}
.modalInput:focus{
  border-color: rgba(201,74,124,0.55);
  box-shadow: 0 0 0 4px rgba(201,74,124,0.18);
}

body.night .modalInput{
  background: rgba(0,0,0,0.22);
  color:#fff;
  border-color: rgba(255,255,255,0.14);
}
body.night .modalInput:focus{
  box-shadow: 0 0 0 4px rgba(160,140,255,0.16);
}

.modalActions{
  display:flex;
  gap:10px;
  justify-content:flex-end;
  margin-top:14px;
}

.modalBtn{
  border:none;
  padding:10px 14px;
  border-radius:14px;
  cursor:pointer;
  font-weight:1000;
  letter-spacing:.2px;
  box-shadow: 0 14px 28px rgba(0,0,0,.22);
  transition: transform .14s var(--ease), opacity .14s var(--ease);
}
.modalBtn:hover{ transform: translateY(-1px); }
.modalBtn:active{ transform: translateY(0px); opacity:.92; }

.modalBtn.ghost{
  background: rgba(255,255,255,0.70);
}
body.night .modalBtn.ghost{
  background: rgba(255,255,255,0.10);
  color:#fff;
  border: 1px solid rgba(255,255,255,0.12);
}

.modalBtn.danger{
  background: rgba(220,40,40,0.92);
  color:#fff;
}

.modalError{
  margin-top:10px;
  font-weight:1000;
  color: #ff4d4d;
  text-shadow: 0 8px 18px rgba(0,0,0,.35);
}

/* =========================
   RESPONSIVE - Tablet & Desktop
========================= */
@media (max-width: 1024px){
  .app{ grid-template-columns: 100px 1fr; }
  .sidebtn{
    width:80px;
    height:80px;
  }
  .sidebtn img{
    width:36px;
    height:36px;
  }
  .sidebtn span{
    font-size:11px;
  }
  .main{
    padding:14px 16px;
  }
}

@media (max-width: 768px){
  /* Stack sidebar to top on smaller tablets */
  .app{ 
    grid-template-columns: 1fr;
    grid-template-rows: auto 1fr;
    height:100vh;
  }
  
  .sidebar{
    padding:10px 12px;
    flex-direction:row;
    gap:10px;
    overflow-x:auto;
    overflow-y:hidden;
    scrollbar-width:none;
  }
  .sidebar::-webkit-scrollbar{ display:none; }
  
  .brand{
    margin-bottom:0;
    gap:6px;
    flex-shrink:0;
  }
  .seal{
    width:44px;
    height:44px;
  }
  .brand-text{
    font-size:14px;
  }
  
  .sidebtn{
    width:70px;
    height:70px;
    flex-shrink:0;
  }
  .sidebtn img{
    width:30px;
    height:30px;
  }
  .sidebtn span{
    font-size:10px;
  }
  
  .spacer{ display:none; }
  
  .main{
    padding:10px 12px;
    gap:10px;
  }
  
  .topTabs, .subTabs{
    padding:8px 10px;
    gap:8px;
    flex-shrink: 0;
  }
  .tab{
    padding:8px 12px;
    font-size:12px;
    border-radius:20px;
  }
  
  .adviserCard{
    padding:10px 12px;
    gap:10px;
    flex-shrink: 0;
  }
  .avatar .circle{
    width:54px;
    height:54px;
  }
  .adviserText .label{
    font-size:12px;
  }
  .adviserText .name{
    font-size:18px;
  }
  
  .tableWrap{
    padding:8px;
    border-radius:20px;
  }
  .tbl thead th{
    padding:8px;
    font-size:12px;
  }
  .tbl tbody td{
    padding:8px;
    font-size:12px;
  }
  
  .modal{
    width:min(480px, 95vw);
  }
  .modalInput{
    font-size:14px;
  }
  
  .graphWrap{
    padding:12px;
    min-height: 380px;
  }
  #dailyChart{ height:320px !important; }
}

@media (max-width: 480px){
  .sidebar{
    padding:8px 10px;
  }
  
  .brand{
    gap:4px;
  }
  .seal{
    width:38px;
    height:38px;
  }
  .brand-text{
    font-size:12px;
    display:none;
  }
  
  .sidebtn{
    width:60px;
    height:60px;
  }
  .sidebtn img{
    width:26px;
    height:26px;
  }
  .sidebtn span{
    font-size:9px;
  }
  
  .main{
    padding:8px;
    gap:8px;
  }
  
  .topTabs, .subTabs{
    padding:6px 8px;
    gap:6px;
    overflow-x:auto;
    scrollbar-width:none;
    flex-shrink: 0;
  }
  .topTabs::-webkit-scrollbar,
  .subTabs::-webkit-scrollbar{ display:none; }
  
  .tab{
    padding:6px 10px;
    font-size:11px;
    flex-shrink:0;
  }
  
  .adviserCard{
    padding:8px 10px;
    gap:8px;
    flex-wrap:wrap;
    flex-shrink: 0;
  }
  .avatar .circle{
    width:48px;
    height:48px;
    flex-shrink:0;
  }
  .adviserText .label{
    font-size:11px;
  }
  .adviserText .name{
    font-size:16px;
  }
  
  .tableWrap{
    padding:6px;
    border-radius:16px;
    overflow-x:auto;
  }
  .tbl{
    font-size:11px;
    min-width:100%;
  }
  .tbl thead th{
    padding:6px;
    font-size:10px;
    font-weight:700;
  }
  .tbl tbody td{
    padding:6px;
    font-size:11px;
    white-space:nowrap;
  }
  
  .modal{
    width:min(90vw, 400px);
    padding:14px;
  }
  .modalTitle{
    font-size:16px;
  }
  .modalSub{
    font-size:12px;
  }
  .modalInput{
    font-size:13px;
    padding:10px 12px;
  }
  .modalBtn{
    padding:8px 12px;
    font-size:12px;
  }
  
  .graphWrap{
    padding:10px;
    min-height: 340px;
  }
  .graphTitle{
    font-size:14px;
  }
  .graphHint{
    font-size:11px;
  }
  #dailyChart{ height:280px !important; }
  
  .emptyState{
    padding:12px;
  }
  .emptyTitle{
    font-size:14px;
  }
  .emptySub{
    font-size:12px;
  }
}
/* =========================
   Smooth transitions for tab changes
   ========================= */

/* container fades */
.fadeSwap{
  animation: fadeSwap .22s ease both;
}
@keyframes fadeSwap{
  from{ opacity: .25; transform: translateY(6px); }
  to{ opacity: 1; transform: translateY(0); }
}

/* table body row enter */
.rowEnter{
  animation: rowEnter .18s ease both;
}
@keyframes rowEnter{
  from{ opacity: 0; transform: translateY(6px); }
  to{ opacity: 1; transform: translateY(0); }
}

/* tabs smooth indicator feel (scale only) */
.tab{
  transition: transform .14s ease, box-shadow .18s ease, background .18s ease, color .18s ease;
}
.tab:active{ transform: scale(0.98); }
/* =========================
   Smooth transitions for tab changes
   ========================= */

/* container fades */
.fadeSwap{
  animation: fadeSwap .22s ease both;
}
@keyframes fadeSwap{
  from{ opacity: .25; transform: translateY(6px); }
  to{ opacity: 1; transform: translateY(0); }
}

/* table body row enter */
.rowEnter{
  animation: rowEnter .18s ease both;
}
@keyframes rowEnter{
  from{ opacity: 0; transform: translateY(6px); }
  to{ opacity: 1; transform: translateY(0); }
}

/* tabs smooth indicator feel (scale only) */
.tab{
  transition: transform .14s ease, box-shadow .18s ease, background .18s ease, color .18s ease;
}
.tab:active{ transform: scale(0.98); }
  
/* =========================
   Sliding tab indicator
========================= */

/* wrapper must be relative */
.topTabs,
#sectionTabs{
  position: relative;
}

/* indicator bar */
.tab-indicator{
  position: absolute;
  bottom: 6px;
  height: 4px;
  border-radius: 999px;
  background: linear-gradient(135deg, #C94A7C, #B13E6D);

  width: 0;
  left: 0;
  transform: translateX(0);
  transition:
    transform .32s cubic-bezier(.22,.61,.36,1),
    width .32s cubic-bezier(.22,.61,.36,1),
    opacity .2s ease;
  opacity: 0;
  pointer-events: none;
}

/* show when ready */
.tab-indicator.ready{
  opacity: 1;
}

/* night mode tweak */
body.night .tab-indicator{
  background: linear-gradient(135deg, rgba(160,140,255,.8), rgba(201,74,124,.7));
}
/* =========================
   FIX GRAPH CUT/OFF + SINGLE SCROLL
   ========================= */

/* Make Graph page the ONLY scroll container */
#pageGraph.page.active{
  height: 100%;
  overflow-y: auto;
  overflow-x: hidden;
  scrollbar-color: var(--accent) transparent;
  scrollbar-width: thin;
}

/* Webkit browsers (Chrome, Safari, Edge) */
#pageGraph.page.active::-webkit-scrollbar{
  width: 10px;
}

#pageGraph.page.active::-webkit-scrollbar-track{
  background: transparent;
}

#pageGraph.page.active::-webkit-scrollbar-thumb{
  background: var(--accent);
  border-radius: 8px;
  border: 2px solid transparent;
  background-clip: padding-box;
}

#pageGraph.page.active::-webkit-scrollbar-thumb:hover{
  background: var(--accent2);
  background-clip: padding-box;
}

/* Graph Wrap: Auto height with proper spacing */
#pageGraph .graphWrap{
  height: auto;
  min-height: 460px;
  padding: 18px;
  padding-bottom: 28px;
  display: flex;
  flex-direction: column;
  gap: 12px;
}
